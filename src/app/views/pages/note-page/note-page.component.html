
<ng-container *ngIf="!currentPage.pageOn">
	<div class="loading-background">
		<app-loading-content-page/>
	</div>
</ng-container>

<ng-container *ngIf="currentPage.pageOn">

	<div class="container">
		<div class="top">
			<app-header-note-page
				[currentPage]="currentPage"
				(throwError)="errorPage($event)"
				(loadFile)="loadFileData()"
			/>
			<main [ngClass]="{'main-loading-file': currentPage.fileUpdateContentOn}">
				<ng-container class="full" *ngIf="currentPage.fileUpdateContentOn">
					<app-loading-content-page/>
				</ng-container>

				<ng-container *ngIf="!currentPage.fileUpdateContentOn">
					<app-loading-content-page
						class="title"
						*ngIf="currentPage.fileUpdateTitleOn"
					/>
					<input
						*ngIf="!currentPage.fileUpdateTitleOn"
						#titleInput
						class="title"
						type="text"
						placeholder="Default..."
						maxlength="48"
						[value]="((currentPage.fileList.length > 0) && (currentPage.currentFile != null))
							? currentPage.currentFile.title
							: ''"
						(focus)="setTitleEvents()"
					/>

					<hr class="hr"/>

					<div #contentFile class="content">
						<div #content class="line" *ngFor="let item of currentPage.currentFileData; let i = index">
							<input
								*ngIf="(currentPage.currentUpdateFileLines.indexOf(item.index) === -1)
									&&(currentPage.pageShowMode === 'edit')"
								class="line-content"
								(blur)="lineEventUpdateWithFocus($event, i, item.index)"
								(keydown)="lineEventChangeWithClick($event, i, item.index)"
								[value]="item.line"
								placeholder="Digite suas anotações..."
							>
							<div
								*ngIf="(currentPage.currentUpdateFileLines.indexOf(item.index) === -1)
									&&(currentPage.pageShowMode === 'edit')"
									class=""
							>
								X
							</div>
							<div
								*ngIf="(currentPage.currentUpdateFileLines.indexOf(item.index) !== -1)
									&&(currentPage.pageShowMode === 'edit')"
								class="line-content line-content-loading"
							>
								<app-loading-content-page [smallSize]="true"/>
							</div>
						</div>
					</div>
				</ng-container>
			</main>
		</div>
		<app-footer/>
	</div>

</ng-container>

<app-info-page
	[title]="pageErrorTitle"
	[show]="pageErrorOn"
	[closeEnter]="true"
	[closeSpace]="true"
	[closeSpace]="true"
	(buttonClick)="errorPageAction()"
>
	{{ pageErrorContent }}
</app-info-page>

<app-info-page
	[title]="'Insira sua senha'"
	[show]="pagePasswordOn"
	[closeEnter]="true"
	[closeSpace]="true"
	[closeSpace]="true"
	[buttonName]="'Confirmar'"
	(buttonClick)="callInputPasswordAction()"
>
	<form action="">
		<app-input-password
			[placeholder]="'Digite sua senha...'"
			[(password)]="inputPasswordModal"
		/>
	</form>
</app-info-page>
